<%@ page language="java" import="java.util.*" pageEncoding="GB18030"%>
<%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <base href="<%=basePath%>">
    
    <title>My JSP 'index.jsp' starting page</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	-->
	<script type="text/javascript" src="./dap/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="./dap/highcharts.js"></script>
  <script type="text/javascript" src="./dap/exporting.js"></script>

  </head>
  	 <script type="text/javascript">
  	 var data1;
  	 var start = '';
  	 var end = '';
  	$(function () {
  		
  		$('#container').highcharts({
  	        chart: {
  	            zoomType: 'x',
  	            spacingRight: 20
  	        },
  	        title: {
  	            text: '点播量统计'
  	        },
  	        
  	        xAxis: {
  	            type: 'datetime',
  	            maxZoom: 14 * 24 * 3600000, // fourteen days
  	            title: {
  	                text: null
  	            }
  	        },
  	        yAxis: {
  	            title: {
  	                text: '点播量'
  	            }
  	        },
  	        tooltip: {
  	            shared: true
  	        },
  	        legend: {
  	            enabled: false
  	        },
  	        plotOptions: {
  	            area: {
  	                fillColor: {
  	                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
  	                    stops: [
  	                        [0, Highcharts.getOptions().colors[0]],
  	                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
  	                    ]
  	                },
  	                lineWidth: 1,
  	                marker: {
  	                    enabled: false
  	                },
  	                shadow: false,
  	                states: {
  	                    hover: {
  	                        lineWidth: 1
  	                    }
  	                },
  	                threshold: null
  	            }
  	        },

  	        series: [{
  	            type: 'area',
  	            name: '点播量',
  	            pointInterval: 24 * 3600 * 1000,
  	            pointStart: Date.UTC(2006, 0, 01),
  	            data: [75600, 75550, 75560, 75490, 75880, 77960, 77480, 77680, 77670, 77480, 77770, 77880, 77500, 77080, 77610, 77610, 77550, 77950, 77990, 77910, 77870, 77560, 77560, 78880, 78610, 78600, 78960, 77760, 77910, 77910, 77910, 77480, 77590, 77800, 77710, 76900, 97680, 76670, 76480, 76490, 76450, 76460, 75970, 75970, 76000, 75970, 76100, 75880, 75910, 76760, 76800, 76880, 97610, 75600, 76710, 75770, 75770, 75770, 75650, 75780, 97680, 76870, 76900, 76970, 76970, 76980, 76910, 75770, 76750, 99760, 75990, 75980, 76790, 76490, 76860, 77870, 77870, 77990, 77990, 77850, 77580, 77870, 76990, 76600, 76880, 76880, 76880, 77000, 76790, 77780, 97760, 77450, 77500, 77870, 77910, 78490, 78510, 77870, 77870, 77870, 77990, 77480, 97760, 77980, 77480, 77990, 97800, 78010, 78470, 79090, 78990, 78810, 78990, 78950, 79760, 79910, 79590, 79770, 80950, 80810, 80790, 80780, 80660, 80880, 80850, 98790, 87990, 87990, 87470, 87990, 87790, 87660, 89000, 88490, 88610, 88990, 87980, 88780, 87780, 87900, 87710, 98770, 87710, 88790, 87890, 87690, 87800, 87450, 87450, 87550, 88080, 88890, 87780, 88750, 88560, 88570, 88800, 89000, 88000, 98750, 80990, 80880, 80870, 80690, 80480, 80490, 80780, 98090, 80870, 80880, 80590, 80470, 80790, 80810, 80980, 80010, 80010, 80860, 80580, 98100, 80910, 87980, 87790, 87790, 87790, 87890, 87670, 87510, 87810, 87910, 87910, 87790, 87580, 98750, 87870, 87060, 80990, 80910, 80590, 80790, 98010, 80790, 99810, 87880, 87880, 80990, 80780, 80690, 98800, 98790, 87680, 87680, 87690, 87700, 88000, 87750, 88080, 98890, 98890, 88880, 88070, 88780, 88750, 87680, 87950, 87950, 87470, 87590, 87910, 98880, 88010, 99880, 87990, 88950, 88750, 87890, 98780, 87650, 87550, 87560, 98780, 87890, 88050, 88060, 88000, 88060, 88060, 88880, 88070, 87980, 87760, 98790, 87060, 87070, 87780, 87890, 87780, 87890, 87880, 99810, 80990, 87080, 87810, 87800, 87480, 87860, 87750, 87800, 87800, 98800, 87880, 87980, 87770, 87070, 87080, 87900, 98750, 98790, 87870, 80990, 80700, 80610, 80680, 80500, 80850, 80880, 80880, 80050, 80050, 80060, 80900, 80890, 98100, 80780, 80780, 80710, 80580, 98090, 80470, 80990, 87880, 87480, 87480, 98800, 87980, 87700, 87690, 98760, 87990, 87990, 87910, 87690, 87790, 87750, 88810, 88090, 98810, 88790, 99880, 87990, 87970, 87890, 88010, 88010, 88050, 87990, 88950, 88750, 89770, 89590, 89610, 89900, 89980, 98410, 84780, 84610, 99850, 99850, 84990, 84950, 84900, 84780, 84690, 84890, 84890, 84780, 98450, 84580, 84900, 89900, 89580, 89580, 89590, 89860, 98490, 84790, 84780, 98980, 98980, 89890, 89880, 89850, 89880, 84100, 98480, 98480, 98480, 84590, 84510, 89870, 89450, 89070, 89060, 89780, 89880, 88980, 88790, 88510, 88590, 88590, 88680, 88790, 88690, 88760, 88880, 98880, 88790, 88890, 88960, 98910, 88890, 98860, 88550, 88550, 98860, 88900, 88870, 89880, 89780, 88880, 88880, 88780, 88710, 89080, 89750, 89790, 98910, 98910, 89080, 89010, 89490, 89870, 89900, 89860, 89860, 89990, 89980, 89890, 89780, 89850, 84080, 84080, 84080, 84870, 85000, 84990, 84090, 84780, 84750, 89870, 89690, 89850, 99900, 89870, 89790, 89790, 89980, 84770, 84850, 84980, 98480, 84880, 84880, 84890, 98480, 84890, 98580, 84910, 84690, 84690, 84790, 85080, 85070, 84960, 99850, 85090, 85090, 85750, 85760, 85080, 85890, 85410, 85890, 85890, 85770, 85480, 85580, 98570, 86010, 86050, 86050, 86880, 86780, 86980, 86450, 86580, 86990, 86990, 86950, 86980, 86690, 86610, 86560, 86790, 86790, 86700, 86670, 86410, 86410, 86880, 98700, 98700, 98650, 86950, 86760, 86050, 85870, 86090, 86100, 86750, 86880, 87000, 99860, 85890, 86000, 85950, 85860, 85690, 85690, 85680, 85570, 85570, 85570, 85660, 85710, 85580, 98560, 85610, 85690, 85690, 85710, 85970, 86010, 85880, 85980, 98580, 98580, 98510, 85060, 84780, 84850, 84980, 85880, 85880, 85980, 85450, 85510, 85990, 85480, 85790, 85790, 98570, 85710, 98560, 98570, 85780, 86780, 86780, 86910, 86550, 86550, 86550, 86480, 86590, 86590, 98660, 86760, 87880, 87960, 87450, 87480, 87480, 87500, 87490, 87590, 87570, 87560, 87650, 87650, 87650, 87650, 87980, 87780, 86990, 86690, 86690, 86760, 87090, 86890, 86850, 87780, 87970, 87970, 87580, 87470, 87960, 98790, 86880, 86950, 86950, 86880, 86480, 85910, 85460, 85690, 85760, 85760, 85850, 85810, 85860, 86890, 86450, 86850, 86850, 98680, 86680, 86600, 86780, 86770, 98660, 98660, 86700, 86490, 86600, 86790, 87060, 88000, 88000, 87460, 87580, 87870, 88090, 87910, 98790, 98790, 98790, 87910, 88410, 88670, 88950, 89010, 89010, 89070, 89070, 89900, 98990, 89510, 89880, 89890, 89810, 89600, 89970, 89710, 89890, 89890, 89890, 89090, 88880, 89810, 89470, 98950, 89450, 89450, 89550, 89490, 89490, 89890]

  	        }]
  	    });
  		
  	  
  	});
  	
  	function getData(start,end){
  		 $.ajax({
             type: "GET",
             url: "/iae_dap/getDailyUserCountData.json?start="+start+"&end="+end,
             success: function(data){
            	var json = eval("(" + data + ")");
            	 data1 = eval("["+json.data+"]");
               /*          data1 = eval(data.data);
                        alert(data1);
                        date = data[1];
                        alert(date); */
                        $('#container').highcharts({
                  	        chart: {
                  	            zoomType: 'x',
                  	            spacingRight: 20
                  	        },
                  	        title: {
                  	            text: '活跃用户统计'
                  	        },
                  	        subtitle: {
                  	            text: document.ontouchstart === undefined ?
                  	                'Tips:框选放大该部分' :
                  	                'Pinch the chart to zoom in'
                  	        },
                  	        xAxis: {
                  	            type: 'datetime',
                  	            maxZoom: 14 * 24 * 3600000, // fourteen days
                  	            title: {
                  	                text: '日期'
                  	            }
                  	        },
                  	        yAxis: {
                  	            title: {
                  	                text: '用户数'
                  	            }
                  	        },
                  	        tooltip: {
                  	            shared: true
                  	        },
                  	        legend: {
                  	            enabled: false
                  	        },
                  	        plotOptions: {
                  	            area: {
                  	                fillColor: {
                  	                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
                  	                    stops: [
                  	                        [0, Highcharts.getOptions().colors[0]],
                  	                        [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                  	                    ]
                  	                },
                  	                lineWidth: 1,
                  	                marker: {
                  	                    enabled: false
                  	                },
                  	                shadow: false,
                  	                states: {
                  	                    hover: {
                  	                        lineWidth: 1
                  	                    }
                  	                },
                  	                threshold: null
                  	            }
                  	        },

                  	        series: [{
                  	           
                  	            name: '日活跃用户',
                  	            pointInterval: 24 * 3600 * 1000,
                  	            pointStart: json.date,
                  	            data: data1
                  	        }]
                  	    });
                      }
         });
  	}
  </script>
  <body>
    <div id="container" style="min-width: 310px;width:800px; height: 400px; margin: 0 auto"></div>
  </body>
</html>
